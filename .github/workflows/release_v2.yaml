name: Release v2

on:
  workflow_dispatch:
    inputs:
      version:
        required: true
        default: '2025.1-1.0.0'
        type: string
        description: 'Custom release version'
      publish:
        required: true
        type: boolean
        default: false
        description: 'Enable publish release?'

jobs:
  check-tag:
    runs-on: ubuntu-latest
    steps:
      # Checkout the repository
      - name: Checkout repo
        uses: actions/checkout@v4

      # Run the Check Tag Action
      # - name: Run Check Tag Action
      #   id: check_tag
      #   uses: ./actions/tag-checker  # Path to the action
      #   with:
      #     tag: ${{ github.event.inputs.version }}
      #     github-token: ${{ secrets.GITHUB_TOKEN }}        

      # - name: Tag exists
      #   if: steps.check_tag.outputs.exists == 'True'  # Check if tag exists
      #   run: echo "The tag exists!"
  
      # - name: Tag does not exist
      #   if: steps.check_tag.outputs.exists == 'False'  # Check if tag does not exist
      #   run: echo "The tag does not exist!" 

      - name: Rise Custom Event  
        uses: ./actions/custom-event  # Path to the action
        with:
          event_name: "custom_event"
          client_payload: '{"key": "value"}' 
          github-token: ${{ secrets.GITHUB_TOKEN }}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}


       
        
        


# jobs:
#   release:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout Code
#         uses: actions/checkout@v4

#       - name: Check Tag Exists
#         uses: ./actions/tag-checker
#         with:
#           tag_name: "v1.0.0"

#       - name: Output Result
#         run: echo "Does the tag exist? ${{ steps.check_tag.outputs.exists }}"

      # - name: Release Drafter  
      #   uses:  nookyo/workflow-hub/.github/workflows/release-drafter.yml@main 
      #   with:
      #     version: ${{ github.event.inputs.version }}
      #     publish: ${{ github.event.inputs.publish }}
        


#   pom:
#     uses: Netcracker/qubership-workflow-hub/.github/workflows/update-pom-release.yml@main
#     needs: release
#     with:
#       file: pom.xml
#       revision: ${{ github.event.inputs.version }}
          

#   maven:
#     uses: Netcracker/qubership-workflow-hub/.github/workflows/maven-publish.yml@main
#     needs: pom
#     with:
#       maven_command: "--batch-mode deploy"
#       java_version: "21"
#       revision: ${{ github.event.inputs.version }}
#     secrets:
#       maven_username: ${{ secrets.MAVEN_USER }}
#       maven_password: ${{ secrets.MAVEN_PASSWORD }}
#       maven_gpg_passphrase: ${{ secrets.MAVEN_GPG_PASSPHRASE  }}
#       maven_gpg_private_key: ${{ secrets.MAVEN_GPG_PRIVATE_KEY  }}
